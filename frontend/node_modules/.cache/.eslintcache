[{"/Users/karthik/Desktop/Code/Richpanel/frontend/src/index.js":"1","/Users/karthik/Desktop/Code/Richpanel/frontend/src/App.js":"2","/Users/karthik/Desktop/Code/Richpanel/frontend/src/reportWebVitals.js":"3","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/SignupPage.js":"4","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/LoginPage.js":"5","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/SelectionPage.js":"6","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Context/SelectedDetails.js":"7","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/PaymentPage.js":"8","/Users/karthik/Desktop/Code/Richpanel/frontend/src/components/CardInput.js":"9","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/PlanPage.js":"10"},{"size":839,"mtime":1691307807462,"results":"11","hashOfConfig":"12"},{"size":713,"mtime":1691315379908,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":1691156503977,"results":"14","hashOfConfig":"12"},{"size":2223,"mtime":1691324004936,"results":"15","hashOfConfig":"12"},{"size":2241,"mtime":1691315345985,"results":"16","hashOfConfig":"12"},{"size":3731,"mtime":1691315335255,"results":"17","hashOfConfig":"12"},{"size":1220,"mtime":1691328414628,"results":"18","hashOfConfig":"12"},{"size":3261,"mtime":1691315922650,"results":"19","hashOfConfig":"12"},{"size":544,"mtime":1691284318420,"results":"20","hashOfConfig":"12"},{"size":2634,"mtime":1691315311264,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","suppressedMessages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},"yendxg",{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35"},{"filePath":"36","messages":"37","suppressedMessages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39"},{"filePath":"40","messages":"41","suppressedMessages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43"},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50"},{"filePath":"51","messages":"52","suppressedMessages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","suppressedMessages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57"},"/Users/karthik/Desktop/Code/Richpanel/frontend/src/index.js",[],[],[],"/Users/karthik/Desktop/Code/Richpanel/frontend/src/App.js",[],[],"/Users/karthik/Desktop/Code/Richpanel/frontend/src/reportWebVitals.js",[],[],"/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/SignupPage.js",["58"],[],"import React from \"react\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nconst SignupPage = () => {\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const navigate = useNavigate();\n\n  const submitHandler = async () => {\n    if (!name || !email || !password) {\n      return;\n    }\n    try {\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n      };\n      const { message } = await axios.post(\n        \"/user\",\n        {\n          name,\n          email,\n          password,\n        },\n        config\n      );\n      navigate(\"/login\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return (\n    <div className=\"container flex flexCenter\">\n      <div className=\"box flexCol signupPage\">\n        <div className=\"heading bold larger textCenter\">Create Account</div>\n        <div className=\"input flexCol\">\n          <label htmlFor=\"name\">Name</label>\n          <input\n            type=\"text\"\n            placeholder=\"Enter your name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n        </div>\n        <div className=\"input flexCol\">\n          <label htmlFor=\"email\">Email</label>\n          <input\n            type=\"email\"\n            placeholder=\"Enter your email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </div>\n        <div className=\"input flexCol\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            placeholder=\"Enter your Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <button className=\"submit blueButton\" onClick={submitHandler}>\n          Sign Up\n        </button>\n        <div className=\"link\">\n          Already have an account?{\" \"}\n          <span>\n            {\" \"}\n            <Link to=\"/login\">Login</Link>{\" \"}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SignupPage;\n","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/LoginPage.js",["59"],[],"import React from \"react\";\nimport { useState,useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { SelectedDetailsState } from \"../Context/SelectedDetails\";\n\nconst LoginPage = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { user, setUser } = SelectedDetailsState();\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    localStorage.clear();\n  }, [])\n  \n\n  const submitHandler = async () => {\n    if (!email || !password) {\n      return;\n    }\n\n    try {\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n      };\n      await axios\n        .post(\n          \"/user/login\",\n          {\n            email,\n            password,\n          },\n          config\n        )\n        .then(({data}) => {\n          localStorage.setItem(\"userInfo\",JSON.stringify(data)\n          );\n          setUser(data);\n          navigate(\"/selection\");\n        });\n\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div className=\"container flex flexCenter\">\n      <div className=\"box flexCol loginPage\">\n        <div className=\"heading bold larger textCenter\">\n          Login into your account\n        </div>\n        <div className=\"input flexCol\">\n          <label htmlFor=\"email\">Email</label>\n          <input\n            type=\"email\"\n            placeholder=\"Enter your email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </div>\n        <div className=\"input flexCol\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            placeholder=\"Enter your Password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <button className=\"submit blueButton\" onClick={submitHandler}>\n          Login\n        </button>\n        <div className=\"link\">\n          New to MyApp?{\" \"}\n          <span>\n            {\" \"}\n            <Link to=\"/\">Sign Up</Link>{\" \"}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/SelectionPage.js",["60"],[],"import React from \"react\";\nimport axios from \"axios\";\nimport { SelectedDetailsState } from \"../Context/SelectedDetails\";\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst SelectionPage = () => {\n  const [plans, setPlans] = useState([]);\n  const { user, period, setPeriod, selectedPlan, setSelectedPlan } =\n  SelectedDetailsState();\n  \n  const navigate = useNavigate();\n  const fetchPlans = async () => {\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n        },\n      };\n      await axios\n        .get(`user/plans?period=${period}`, config)\n        .then(({ data }) => {\n          setPlans(data);\n        });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    fetchPlans(period);\n  },[period,user]);\n\n\n  return (\n    <div className=\"container flex flexCenter\">\n      <div className=\"box flexCol selectionPage flexCenter\">\n        <div className=\"heading bold larger\">Choose the right plan for you</div>\n        <div className=\"flex\">\n          <div className=\"flexCol\">\n            <div className=\"tabs flex\">\n              <div className=\"flex tabList flexCenter\">\n                <button\n                  className={period === \"Montly\" ? \"tab selected\" : \"tab\"}\n                  onClick={() => {\n                    setPeriod(\"Montly\");\n                  }}\n                >\n                  Montly\n                </button>\n                <button\n                  className={period === \"Yearly\" ? \"tab selected\" : \"tab\"}\n                  onClick={() => {\n                    setPeriod(\"Yearly\");\n                  }}\n                >\n                  Yearly\n                </button>\n              </div>\n            </div>\n\n            <div className=\"tableData fill underline\">Montly price</div>\n            <div className=\"tableData fill underline\">Video Quality</div>\n            <div className=\"tableData fill underline\">Resolution</div>\n            <div className=\"tableData fill\">Devices you can use to watch</div>\n          </div>\n          {plans.map((plan, id) => {\n            return (\n              <div\n                className={\n                  selectedPlan\n                    ? selectedPlan.name === plan.name\n                      ? \"flexCol textCenter fill\"\n                      : \"flexCol textCenter opac\"\n                    : \"\"\n                }\n                key={id}\n              >\n                <div className=\"tableHeading flexCol flexCenter\">\n                  <button\n                    className=\"tableHeadingData flex flexCenter blueButton\"\n                    onClick={() => {\n                      setSelectedPlan(plan);\n                    }}\n                  >\n                    {plan.name}\n                  </button>\n                  <div className=\"down-arrow\"></div>\n                </div>\n                <div className=\"tableData underline\">{plan.price}</div>\n                <div className=\"tableData underline\">{plan.quality}</div>\n                <div className=\"tableData underline\">{plan.resolution}</div>\n                <div>\n                  {plan.devices.map((device, id) => {\n                    return (\n                      <div className=\"tableData textCenter\" key={id}>\n                        {device}\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        <button\n          className=\"submit blueButton textCenter\"\n          onClick={() => {\n            navigate(\"/payment\");\n          }}\n        >\n          Next\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SelectionPage;\n","/Users/karthik/Desktop/Code/Richpanel/frontend/src/Context/SelectedDetails.js",[],[],"/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/PaymentPage.js",["61","62"],[],"import React, { useEffect } from \"react\";\nimport { SelectedDetailsState } from \"../Context/SelectedDetails\";\nimport { useStripe, useElements, CardElement } from \"@stripe/react-stripe-js\";\nimport axios from \"axios\";\nimport CardInput from \"../components/CardInput\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst PaymentPage = () => {\n  const { user, selectedPlan,active,setActive,setStartTime } = SelectedDetailsState();\n\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if(active){\n      navigate('/plan');\n    }\n  }, [])\n  \n  const submitHandler = async (event) => {\n    if (!stripe || !elements) {\n      return;\n    }\n\n    const result = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement),\n      billing_details: {\n        email: user.email\n      },\n    });\n\n    if (result.error) {\n      console.log(result.error.message);\n    } else {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n        },\n      };\n      const res = await axios.post(\"/payment\", {\n        payment_method: result.paymentMethod.id,\n        period: selectedPlan.period,\n        plan: selectedPlan.name\n      },config);\n        \n      const { client_secret, status, time } = res.data;\n      if (status === \"requires_action\") {\n        stripe.confirmCardPayment(client_secret).then(function (result) {\n          if (result.error) {\n            console.log(\"There was an issue!\");\n            console.log(result.error);\n          } else {\n            console.log(\"Subscription Activated\");\n            setActive(1);\n            setStartTime(time)\n            navigate('/plan');\n          }\n        });\n      } else {\n        console.log(\"Subscription Activated\");\n        setActive(1);\n        setStartTime(time)\n        navigate('/plan');\n      }\n    }\n  };\n\n  return (\n    <div className=\"container paymentPage flex flexCenter\">\n      <div className=\"flex\">\n        <div className=\"cardDetails flexCol\">\n          <div className=\"x-large bold\">Complete Payment</div>\n          <div className=\"opac\">Enter your credit or debit card details</div>\n          <div className=\"cardInput\">\n          <CardInput />\n          </div>\n          <button className=\"submit large blueButton\" onClick={submitHandler}>\n            Confirm Payment\n          </button>\n        </div>\n        <div className=\"orderSummary flexCol\">\n          <div className=\"heading larger bold\">Order Summary</div>\n          <div className=\"flex underline\">\n            <div className=\"tableData\">Plan Name</div>\n            <div className=\"tableData medium\">{selectedPlan.name}</div>\n          </div>\n          <div className=\"flex underline\">\n            <div className=\"tableData\">Billing Cycle</div>\n            <div className=\"tableData medium\">{selectedPlan.period}</div>\n          </div>\n          <div className=\"flex\">\n            <div className=\"tableData \">Plan price</div>\n            <div className=\"tableData medium\">\n              &#8377;{selectedPlan.price}\n              {selectedPlan.period == \"Montly\" ? \"/mo\" : '/yr'}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentPage;\n","/Users/karthik/Desktop/Code/Richpanel/frontend/src/components/CardInput.js",[],[],"/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/PlanPage.js",["63"],[],"import React from \"react\";\nimport { SelectedDetailsState } from \"../Context/SelectedDetails\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect } from \"react\";\n\nconst PlanPage = ( ) => {\n  const { user, selectedPlan, active, setActive, startTime } = SelectedDetailsState();\n  const devices = selectedPlan.devices.join(\"+\");\n\n  const navigate = useNavigate();\n\n  function timeConverter(UNIX_timestamp) {\n    var a = new Date(UNIX_timestamp * 1000);\n    var months = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var time = month + \" \" + date + \"th, \" + year;\n    return time;\n  }\n\n  const cancel = async () => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${user.token}`,\n      },\n    };\n    await axios.get(\"/payment\", config).then(() => {\n      setActive(0);\n    });\n  };\n\n  return (\n    <div className=\"container flex flexCenter\">\n      <div className=\"box flexCol planPage\">\n        <div className=\"flex header\">\n          <div className=\"flex flexCenter\">\n            <div className=\"heading bold large\">Current Plan Details</div>\n            {active ? (\n              <div className=\"active\">Active</div>\n            ) : (\n              <div className=\"cancelled\">Cancelled</div>\n            )}\n          </div>\n          {active ? <button className=\"cancel\" onClick={cancel}>Cancel</button> : \"\"}\n        </div>\n        <div className=\"medium\">Basic</div>\n        <div className=\"opac\">{devices}</div>\n        <div className=\"bold x-large cost\">\n          &#8377;{selectedPlan.price}{\" \"}\n          <span className=\"medium large\">\n            /{selectedPlan.period === \"Montly\" ? \"mo\" : \"yr\"}\n          </span>\n        </div>\n\n        <button\n          className=\"whiteButton\"\n          onClick={() => {\n            navigate(\"/selection\");\n          }}\n        >\n          {active ? \"Change Plan\" : \"Choose Plan\"}\n        </button>\n        {active ? <div className=\"message\">\n          Your subscription as started on {timeConverter(startTime)} and will\n          auto renew on{\" \"}\n          {timeConverter(\n            startTime + (selectedPlan.period === \"Montly\" ? 2716143 : 31643326)\n          )}\n        </div> : <div className=\"message\">\n          Your subscription was cancelled and you will loose access to service on  {timeConverter(startTime)}\n        </div>}\n        \n      </div>\n    </div>\n  );\n};\n\nexport default PlanPage;\n",{"ruleId":"64","severity":1,"message":"65","line":24,"column":15,"nodeType":"66","messageId":"67","endLine":24,"endColumn":22},{"ruleId":"64","severity":1,"message":"68","line":11,"column":11,"nodeType":"66","messageId":"67","endLine":11,"endColumn":15},{"ruleId":"69","severity":1,"message":"70","line":32,"column":5,"nodeType":"71","endLine":32,"endColumn":18,"suggestions":"72"},{"ruleId":"69","severity":1,"message":"73","line":20,"column":6,"nodeType":"71","endLine":20,"endColumn":8,"suggestions":"74"},{"ruleId":"75","severity":1,"message":"76","line":98,"column":36,"nodeType":"77","messageId":"78","endLine":98,"endColumn":38},{"ruleId":"64","severity":1,"message":"79","line":5,"column":10,"nodeType":"66","messageId":"67","endLine":5,"endColumn":19},"no-unused-vars","'message' is assigned a value but never used.","Identifier","unusedVar","'user' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchPlans'. Either include it or remove the dependency array.","ArrayExpression",["80"],"React Hook useEffect has missing dependencies: 'active' and 'navigate'. Either include them or remove the dependency array.",["81"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'useEffect' is defined but never used.",{"desc":"82","fix":"83"},{"desc":"84","fix":"85"},"Update the dependencies array to be: [fetchPlans, period, user]",{"range":"86","text":"87"},"Update the dependencies array to be: [active, navigate]",{"range":"88","text":"89"},[821,834],"[fetchPlans, period, user]",[601,603],"[active, navigate]"]