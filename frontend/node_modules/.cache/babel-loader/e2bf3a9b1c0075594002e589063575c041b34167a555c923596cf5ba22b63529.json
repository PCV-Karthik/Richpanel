{"ast":null,"code":"import _regeneratorRuntime from\"/Users/karthik/Desktop/Code/Richpanel/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/karthik/Desktop/Code/Richpanel/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{SelectedDetailsState}from\"../Context/SelectedDetails\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PlanPage=function PlanPage(){var _SelectedDetailsState=SelectedDetailsState(),user=_SelectedDetailsState.user,selectedPlan=_SelectedDetailsState.selectedPlan,active=_SelectedDetailsState.active,setActive=_SelectedDetailsState.setActive,startTime=_SelectedDetailsState.startTime;var devices=selectedPlan.devices.join(\"+\");var navigate=useNavigate();function timeConverter(UNIX_timestamp){var a=new Date(UNIX_timestamp*1000);var months=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];var year=a.getFullYear();var month=months[a.getMonth()];var date=a.getDate();var time=month+\" \"+date+\"th, \"+year;return time;}var cancel=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:config={headers:{Authorization:\"Bearer \".concat(user.token)}};_context.next=3;return axios.get(\"/payment\",config).then(function(){setActive(0);});case 3:case\"end\":return _context.stop();}},_callee);}));return function cancel(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container flex flexCenter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box flexCol planPage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flexCenter\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"heading bold large\",children:\"Current Plan Details\"}),active?/*#__PURE__*/_jsx(\"div\",{className:\"active\",children:\"Active\"}):/*#__PURE__*/_jsx(\"div\",{className:\"cancelled\",children:\"Cancelled\"})]}),active?/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:cancel,children:\"Cancel\"}):\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"medium\",children:\"Basic\"}),/*#__PURE__*/_jsx(\"div\",{className:\"opac\",children:devices}),/*#__PURE__*/_jsxs(\"div\",{className:\"bold x-large cost\",children:[\"\\u20B9\",selectedPlan.price,\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"medium large\",children:[\"/\",selectedPlan.period===\"Montly\"?\"mo\":\"yr\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"whiteButton\",onClick:function onClick(){navigate(\"/selection\");},children:active?\"Change Plan\":\"Choose Plan\"}),active?/*#__PURE__*/_jsxs(\"div\",{className:\"message\",children:[\"Your subscription as started on \",timeConverter(startTime),\" and will auto renew on\",\" \",timeConverter(startTime+(selectedPlan.period===\"Montly\"?2716143:31643326))]}):/*#__PURE__*/_jsxs(\"div\",{className:\"message\",children:[\"Your subscription was cancelled and you will loose access to service on  \",timeConverter(startTime)]})]})});};export default PlanPage;","map":{"version":3,"names":["React","SelectedDetailsState","axios","useNavigate","useEffect","jsx","_jsx","jsxs","_jsxs","PlanPage","_SelectedDetailsState","user","selectedPlan","active","setActive","startTime","devices","join","navigate","timeConverter","UNIX_timestamp","a","Date","months","year","getFullYear","month","getMonth","date","getDate","time","cancel","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","wrap","_callee$","_context","prev","next","headers","Authorization","concat","token","get","then","stop","apply","arguments","className","children","onClick","price","period"],"sources":["/Users/karthik/Desktop/Code/Richpanel/frontend/src/Pages/PlanPage.js"],"sourcesContent":["import React from \"react\";\nimport { SelectedDetailsState } from \"../Context/SelectedDetails\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useEffect } from \"react\";\n\nconst PlanPage = ( ) => {\n  const { user, selectedPlan, active, setActive, startTime } = SelectedDetailsState();\n  const devices = selectedPlan.devices.join(\"+\");\n\n  const navigate = useNavigate();\n\n  function timeConverter(UNIX_timestamp) {\n    var a = new Date(UNIX_timestamp * 1000);\n    var months = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ];\n    var year = a.getFullYear();\n    var month = months[a.getMonth()];\n    var date = a.getDate();\n    var time = month + \" \" + date + \"th, \" + year;\n    return time;\n  }\n\n  const cancel = async () => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${user.token}`,\n      },\n    };\n    await axios.get(\"/payment\", config).then(() => {\n      setActive(0);\n    });\n  };\n\n  return (\n    <div className=\"container flex flexCenter\">\n      <div className=\"box flexCol planPage\">\n        <div className=\"flex header\">\n          <div className=\"flex flexCenter\">\n            <div className=\"heading bold large\">Current Plan Details</div>\n            {active ? (\n              <div className=\"active\">Active</div>\n            ) : (\n              <div className=\"cancelled\">Cancelled</div>\n            )}\n          </div>\n          {active ? <button className=\"cancel\" onClick={cancel}>Cancel</button> : \"\"}\n        </div>\n        <div className=\"medium\">Basic</div>\n        <div className=\"opac\">{devices}</div>\n        <div className=\"bold x-large cost\">\n          &#8377;{selectedPlan.price}{\" \"}\n          <span className=\"medium large\">\n            /{selectedPlan.period === \"Montly\" ? \"mo\" : \"yr\"}\n          </span>\n        </div>\n\n        <button\n          className=\"whiteButton\"\n          onClick={() => {\n            navigate(\"/selection\");\n          }}\n        >\n          {active ? \"Change Plan\" : \"Choose Plan\"}\n        </button>\n        {active ? <div className=\"message\">\n          Your subscription as started on {timeConverter(startTime)} and will\n          auto renew on{\" \"}\n          {timeConverter(\n            startTime + (selectedPlan.period === \"Montly\" ? 2716143 : 31643326)\n          )}\n        </div> : <div className=\"message\">\n          Your subscription was cancelled and you will loose access to service on  {timeConverter(startTime)}\n        </div>}\n        \n      </div>\n    </div>\n  );\n};\n\nexport default PlanPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}